__templates:
  pip-config: &pip-config
    dependencies: true
    python-exe: python3.5

containers:
  req-freezer:
    setup: 
      - !Alpine v3.4
      - !PipConfig 
        <<: *pip-config
      - !Py3Install
        - pip
        - flask
        - jsonschema
        - pymongo

commands:
  freeze: !Command
    description: Freeze pytohn requirements to requirements.txt
    container: req-freezer
    run: |
        cp /work/requirements.txt /work/requirements.txt.old
        pip freeze > /work/requirements.txt
        diff /work/requirements.txt.old /work/requirements.txt
